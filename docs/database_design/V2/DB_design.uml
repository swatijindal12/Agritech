@startuml
title Agritech DB design

left to right direction
skinparam roundcorner 5
skinparam linetype ortho
skinparam shadowing false
skinparam handwritten false
skinparam class {
    BackgroundColor white
    ArrowColor #2688d4
    BorderColor #2688d4
}

!define primary_key(x) <b><color:green><&key></color> x</b>
!define foreign_key(x) <color:#aaaaaa><&key></color> **x**
!define mandatorycolumn(x) <color:black><&media-record></color> **x**
!define optionalcolumn(x)  <color:white><&media-record></color> x
!define table(x) entity x << (T, green) >>

table( customer ) {
  primary_key( id ): UUID<<autogenerated>>
  mandatorycolumn( ipfsHash ): String 
  mandatorycolumn( publicKey ) : String
  mandatorycolumn( privateKey ) : String
  mandatorycolumn( name ) : String
  mandatorycolumn( address ) : String
  mandatorycolumn( phone ) : Number
  mandatorycolumn( email ) : String
  mandatorycolumn( foodGrain ) : Boolean
  mandatorycolumn( vegetables ) : Boolean
  mandatorycolumn( hortiCulture ) : Boolean
  mandatorycolumn( floriCulture ) : Boolean 
  mandatorycolumn( exoticCrop ) : Boolean
  optionalcolumn( createdAt ) : Date
  optionalcolumn( updatedAt ) : Date
}

table( farmer ) {
  primary_key( id ): UUID<<autogenerated>>
  mandatorycolumn( name ) : String
  mandatorycolumn( phone ) : Number
  mandatorycolumn( publicKey ) : String
  mandatorycolumn( privateKey ) : String
  mandatorycolumn( imageUrl ) : String
  mandatorycolumn( pin ) : Number
  mandatorycolumn( address ) : String
  mandatorycolumn( email ) : String
  mandatorycolumn( education ) : String
  mandatorycolumn( rating ) : Number
  optionalcolumn( createdAt ) : Date
  optionalcolumn( updatedAt ) : Date
}

table( farm ) {
  primary_key( id ): UUID<<autogenerated>>
  foreign_key( farmerId ): INTEGER <<FK>>
  mandatorycolumn( name ) : String
  mandatorycolumn( farmnftId ) : String
  mandatorycolumn( ipfsHash ): String
  mandatorycolumn( address ) : String
  mandatorycolumn( imageUrl ) : String
  mandatorycolumn( videoUrl ) : String
  mandatorycolumn( pin ) : Number
  mandatorycolumn( farmLocation ) : String
  mandatorycolumn( farmSize ) : Number
  mandatorycolumn( foodGrain ) : Boolean
  mandatorycolumn( vegetables ) : Boolean
  mandatorycolumn( hortiCulture ) : Boolean
  mandatorycolumn( floriCulture ) : Boolean 
  mandatorycolumn( exoticCrop ) : Boolean
  mandatorycolumn( rating ) : Number
  optionalcolumn( createdAt ) : Date
  optionalcolumn( updatedAt ) : Date
}


table( agreement ) {
  primary_key( id ): UUID<<autogenerated>>
  foreign_key( customerId ): INTEGER <<FK>>
  mandatorycolumn( ipfsHash ): String
  mandatorycolumn( farmerName ) : String
  mandatorycolumn( startDate ) : Date
  mandatorycolumn( endDate ) : Date  
  mandatorycolumn( quantity ) : Number
  mandatorycolumn( crop ) : String
  mandatorycolumn( price ) : String
  mandatorycolumn( agreementnftId ) : String  
  mandatorycolumn( soldStatus ) : Boolean
  mandatorycolumn( agreementclose_status ) : Boolean
  optionalcolumn( createdAt ) : Date
  optionalcolumn( updatedAt ) : Date
}

table( payment ) {
  primary_key( id ): UUID<<autogenerated>>
  foreign_key( agreementId ): INTEGER <<FK>>
  mandatorycolumn( razorpay_payment_id ): String
  mandatorycolumn( razorpay_order_id ): String
  mandatorycolumn( razorpay_signature ) : String
  optionalcolumn( createdAt ) : Date
  optionalcolumn( updatedAt ) : Date
}

map Symbol_and_Relation {
 |o-- => Zero or One
 ||-- => Exactly One	
 }o-- => Zero or Many
 }|-- => One or Many
}

farm }o--|| farmer
payment ||--|| agreement
agreement }o--|| customer
agreement }o--|| farm
@enduml