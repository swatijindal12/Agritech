@startuml
title Agritech DB design

left to right direction
skinparam roundcorner 5
skinparam linetype ortho
skinparam shadowing false
skinparam handwritten false
skinparam class {
    BackgroundColor white
    ArrowColor #2688d4
    BorderColor #2688d4
}

!define primary_key(x) <b><color:green><&key></color> x</b>
!define foreign_key(x) <color:#aaaaaa><&key></color> **x**
!define mandatorycolumn(x) <color:black><&media-record></color> **x**
!define optionalcolumn(x)  <color:white><&media-record></color> x
!define table(x) entity x << (T, green) >>

table( user ) {
  primary_key( id ): UUID<<autogenerated>>
  mandatorycolumn( ipfs_hash ): String 
  mandatorycolumn( country_code ) : String
  mandatorycolumn( mobile_number ) : Number
  mandatorycolumn( private_key ) : String
  mandatorycolumn( public_key ) : String
  mandatorycolumn( role ) : String
  optionalcolumn( created_at ) : Date
  optionalcolumn( updated_at ) : Date
}

table( agreement ) {
  primary_key( id ): UUID<<autogenerated>>
  foreign_key( seller_id ): INTEGER <<FK>>
  foreign_key( buyer_id ): INTEGER <<FK>>
  mandatorycolumn( agreementnft_id ) : String  
  mandatorycolumn( sold_status ) : Boolean
  mandatorycolumn( agreementclose_status ) : Boolean
  optionalcolumn( created_at ) : Date
  optionalcolumn( updated_at ) : Date
}

table( farm ) {
  primary_key( id ): UUID<<autogenerated>>
  foreign_key( user_id ): INTEGER <<FK>>
  mandatorycolumn( farmnft_id ) : String  
  mandatorycolumn( ipfs_hash  ): String 
  mandatorycolumn( validated_status ) : Boolean
  optionalcolumn( created_at ) : Date
  optionalcolumn( updated_at ) : Date
}

map Symbol_and_Relation {
 |o-- => Zero or One
 ||-- => Exactly One	
 }o-- => Zero or Many
 }|-- => One or Many
}

farm }o--|| user
farm ||--|| agreement
agreement }o--|| user
@enduml