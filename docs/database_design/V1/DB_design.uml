@startuml
title Agritech DB design


left to right direction
skinparam roundcorner 5
skinparam linetype ortho
skinparam shadowing false
skinparam handwritten false
skinparam class {
    BackgroundColor white
    ArrowColor #2688d4
    BorderColor #2688d4
}


!define primary_key(x) <b><color:green><&key></color> x</b>
!define foreign_key(x) <color:#aaaaaa><&key></color> **x**
!define mandatorycolumn(x) <color:black><&media-record></color> **x**
!define optionalcolumn(x)  <color:white><&media-record></color> x
!define table(x) entity x << (T, green) >>


table( users ) {
  primary_key( id ): UUID<<autogenerated>>
  mandatorycolumn( ipfsURI ): String 
  mandatorycolumn( countryCode ) : String
  mandatorycolumn( mobileNumber ) : Number
  mandatorycolumn( privateKey ) : String
  mandatorycolumn( publicKey ) : String
  mandatorycolumn( role ) : String
  optionalcolumn( createdAt ) : Date
  optionalcolumn( updatedAt ) : Date
}

table( agreements ) {
  primary_key( id ): UUID<<autogenerated>>
  foreign_key( sellerId ): INTEGER <<FK>>
  foreign_key( buyerId ): INTEGER <<FK>>
  mandatorycolumn( agreementNFTId ) : String  
  mandatorycolumn( isSold ) : Boolean
  mandatorycolumn( isAgreementClose ) : Boolean
  optionalcolumn( createdAt ) : Date
  optionalcolumn( updatedAt ) : Date
}

table( farms ) {
  primary_key( id ): UUID<<autogenerated>>
  foreign_key( userId ): INTEGER <<FK>>
  mandatorycolumn( farmNFTId ) : String  
  mandatorycolumn( ipfsURI  ): String 
  mandatorycolumn( isValidated ) : Boolean
  optionalcolumn( createdAt ) : Date
  optionalcolumn( updatedAt ) : Date
}

map Symbol_and_Relation {
 |o-- => Zero or One
 ||-- => Exactly One	
 }o-- => Zero or Many
 }|-- => One or Many
}


farms }o--|| users
farms ||--|| agreements
agreements }o--|| users
@enduml